CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

PROJECT(ffsp)

SET(MKFS_BINARY "mkfs.ffsp")
SET(MOUNT_BINARY "mount.ffsp")

IF(NOT CMAKE_BUILD_TYPE)
    MESSAGE(STATUS "No build type selected. Default to Debug")
    SET(CMAKE_BUILD_TYPE "Debug")
ENDIF()

ADD_DEFINITIONS("-D_FILE_OFFSET_BITS=64 -Wall -Wextra -pedantic")

SET(CMAKE_C_FLAGS "-std=c99")
SET(CMAKE_C_FLAGS_DEBUG "-O0 -g3")

FILE(GLOB MKFS_SRC mkfs.ffsp.c)
FILE(GLOB MOUNT_SRC mount.ffsp.c)
FILE(GLOB FFSP_SRC libffsp/*.h libffsp/*.c)

INCLUDE_DIRECTORIES(${FUSE_INCLUDE_DIRS})

ADD_EXECUTABLE(${MKFS_BINARY} ${MKFS_SRC} ${FFSP_SRC})
TARGET_LINK_LIBRARIES(${MKFS_BINARY})

ADD_EXECUTABLE(${MOUNT_BINARY} ${MOUNT_SRC} ${FFSP_SRC})
TARGET_LINK_LIBRARIES(${MOUNT_BINARY} fuse)
